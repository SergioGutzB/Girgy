YUI.add("search-autosuggest-field-view",function(e){var t=150;e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){var n=this.appContext.getLocation();return this.set("searchUrl",new e.SearchUrl(n.href,this.appContext)),this.set("siteSection",e.URLHelper.getSiteSectionByURL(n.pathname)),this.appContext.flipper.isFlipped("enable-search-pills")&&this.set("contextToString",{photos:this.intlMessage({intlName:"groups.PHOTOS"}),photostream:this.intlMessage({intlName:"groups.PHOTOS"}),favorites:this.intlMessage({intlName:"common.FAVORITES"}),faves:this.intlMessage({intlName:"common.FAVORITES"}),albums:this.intlMessage({intlName:"common.ALBUMS"}),everyone:this.intlMessage({intlName:"search.EVERYONE"}),contacts:this.intlMessage({intlName:"search.PEOPLE_YOU_FOLLOW"}),peopleYouFollow:this.intlMessage({intlName:"search.PEOPLE_YOU_FOLLOW"}),discussions:this.intlMessage({intlName:"groups.DISCUSSIONS_LINK_LABEL"})}),this.enableMobileNav=t.enableMobileNav,this},subviewConfig:{"search-autosuggest-items-list-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return this.enableMobileNav||this.appContext.getUA().isMobileOrTablet}}},loadState:function(){var t;return this.enableMobileNav?e.Promise.resolve():(t=[this.getContextModelPromise()],e.Promise.all(t))},additionalViewClasses:function(){var e=[];return e},buildContainer:function(){var e=this.get("context"),t=this.get("searchUrl").getSearchTerm(),n=[];return e&&e.type&&n.push({combo:!0,name:e.name,secondName:this.get("contextToString")[e.scope]}),this.setContainerWithTemplate("search-autosuggest-field",{searchTerm:t,pills:n,hasPills:n.length>0}),(n.length>0||t.length>0)&&this.get("container").addClass("expanded"),this},activate:function(){var t=this.get("container"),n=t.one("#search-field");this.appContext.getViewer().prefs&&this.appContext.getViewer().prefs.keyboardShortcutsEnabled&&this.attachKeyEvent("up:83",this.focusSearchField.bind(this)),t.one("form")&&this.registerEventHandler(t.one("form").on("submit",this.executeSearch.bind(this))),this.appContext.flipper.isFlipped("enable-search-pills")&&this.registerEventHandler(e.on("add-context-to-search-field",this.addContext.bind(this))),this.appContext.flipper.isFlipped("enable-empty-search-text-transfer")&&this.registerEventHandler(e.on("transfer-to-gn-search",this.addSearchText.bind(this))),this.registerEventHandler(t.on("mousedown",this.handleMouseDown.bind(this))),this.registerEventHandler(n.on({valuechange:this.updateAutosuggestItems.bind(this),focus:this.handleSearchFieldFocus.bind(this),blur:this.handleSearchFieldBlur.bind(this)})),this.registerEventHandler(n.on("key",this.handleSearchFieldKeydown.bind(this),"down:27,38,40,8"));try{e.config.doc.activeElement.isEqualNode(n.getDOMNode())&&(this.blurSearchField(),this.focusSearchField())}catch(r){}return this},getContextModelPromise:function(){var t=this.get("searchUrl").getAPIParams(),n=e.Promise.resolve(),r=null,i=this;return this.appContext.flipper.isFlipped("enable-search-pills")&&(t[e.SearchHelper.API.groupId]?(r={type:"group",id:t[e.SearchHelper.API.groupId],scope:"photos"},n=this.appContext.getModel("group-info-models",r.id)):t[e.SearchHelper.API.userId]?(r={type:"user",id:t[e.SearchHelper.API.userId],scope:t[e.SearchHelper.API.faves]?"favorites":"photostream"},t[e.SearchHelper.API.faves]?r.scope="favorites":t[e.SearchHelper.UNIFIED_STATE_PARAMS.albums]?r.scope="albums":r.scope="photostream",n=this.appContext.getModel("person-models",r.id)):t[e.SearchHelper.API.faves]?(r={type:"user",id:this.appContext.getViewer().nsid,scope:"favorites"},n=this.appContext.getModel("person-models",r.id)):t[e.SearchHelper.API.contacts]?r={type:"contacts",scope:"photos",name:this.get("contextToString").contacts}:t[e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll]&&(r={type:"everyone",scope:"photos",name:this.get("contextToString").everyone})),n.then(function(e){e&&(r.name=r.type==="user"?e.getValue("displayname"):e.getValue("group").getValue("title")),i.set("context",r)})},handleMouseDown:function(e){var t=e.target;if(e.which===1)if(t.hasClass("search-pill-remover"))e.halt(),this.removeContext();else if(t.hasClass("search-icon-button"))e.halt(),this.executeSearch(e);else if(t.hasClass("search-pill")||t.hasClass("search-pillbox")||t.hasClass("search-form"))e.halt(),this.focusSearchField()},addSearchText:function(e){var t=this.get("container").one("#search-field");t.set("value",t.get("value")+e),this.focusSearchField()},addPill:function(t,n){var r,i={name:t};n&&(i.combo=!0,i.secondName=n),r=e.Node.create(this.templates("search-pill")(i)),this.get("container").one(".search-pillbox").appendChild(r)},removePills:function(){this.get("container").one(".search-pillbox").get("children").remove()},addContext:function(t){var n=this.get("context");if(!n||n.id!==t.id||n.name!==t.name||n.type!==t.type||n.scope!==t.scope)n&&n.type?(this.removeContext(),this.set("context",t),this.addPill(t.name,this.get("contextToString")[t.scope])):(this.set("context",t),this.addPill(t.name,this.get("contextToString")[t.scope]));this.fire("parentViewEvent","disable-autosuggest"),this.get("container").one("#search-field").set("placeholder",""),this.focusSearchField(),e.rapidTracker.beacon(this.name,"searchAddContext_"+t.type+"_"+t.scope)},removeContext:function(){var t=this.get("container"),n=t.one("#search-field");this.set("context",null),n.set("placeholder",this.intlMessage({intlName:"search.PHOTOS_PEOPLE_OR_GROUPS"})),this.removePills(),this.blurSearchBar(),e.fire("remove-context-in-search-field",{}),e.rapidTracker.beacon(this.name,"searchRemoveContext");if(this.get("siteSection")&&this.get("siteSection").name==="search"&&n.get("value").length>0){this.executeSearch();return}this.updateAutosuggestItems(),t.hasClass("expanded")&&(this.fire("parentViewEvent","enable-autosuggest"),this.firstAutosuggestView||(e.rapidTracker.beacon(this.name,"autosuggestShow"),this.firstAutosuggestView=!0))},onParentViewEvent
:function(e,t){var n=t&&t.length&&t[0];switch(n){case"resize-search-field":this.resizeSearchField(t[1]);break;case"focus-search-field":this.focusSearchField();break;case"clear-search-field":this.clearSearchField()}},onSubviewEvent:function(e,t){var n=t&&t.length&&t[0],r=this.get("container"),i,s;switch(n){case"autosuggest-lost-all-focus":this.handleAutosuggestBlur();break;case"focus-search-field":this.focusSearchField();break;case"autosuggest-no-items":r.removeClass("autosuggest-active");break;case"autosuggest-has-items":r.addClass("autosuggest-active");break;case"autosuggest-update-field":s=r.one("#search-field"),s&&typeof t[1]=="string"&&s.set("value",t[1]);break;case"backspace-focus":s=r.one("#search-field"),s&&(i=s.get("value"),s.set("value",i.substring(0,i.length-1)),this.focusSearchField())}},executeSearch:function(t){var n,r,i,s={};t&&t.halt(),n=this.get("container").one("#search-field").get("value"),i=this.get("context"),i&&i.type?(i.type==="group"&&i.scope==="discussions"?(s.q=n,s.w=i.id,s.m="discuss",r=new e.SearchUrl(s,this.appContext,e.SearchUrl.searchTypes.CLASSIC_GROUPS)):(i.type==="user"?(s[e.SearchHelper.API.userId]=i.id,i.scope==="favorites"?s[e.SearchHelper.API.faves]=1:i.scope==="albums"?s[e.SearchHelper.UNIFIED_STATE_PARAMS.albums]=1:s[e.SearchHelper.API.userId]=i.id):i.type==="group"?s[e.SearchHelper.API.groupId]=i.id:i.type==="contacts"?s[e.SearchHelper.API.contacts]="all":i.type==="everyone",s[e.SearchHelper.UNIFIED_STATE_PARAMS.viewAll]=1,r=this.get("searchUrl"),Object.keys(s).forEach(function(e){r.setAPIParam(e,s[e])}),r.setSearchType(e.SearchUrl.searchTypes.PHOTOS),r.setSearchTerm(n)),e.rapidTracker.beacon(this.name,"searchWithContext_"+i.type+"_"+i.scope)):(r=this.get("searchUrl"),r.createNewSearch(n)),this.appContext.flapp.navigate(r.getURL())},focusSearchField:function(t){e.OverlayManager.DroparoundOverlay.closeAll(),this.get("container").one("#search-field").focus()},blurSearchField:function(e){this.get("container").one("#search-field").blur()},resizeSearchField:function(e){e?(this.get("container").setStyle("width",e+"px"),this.get("container").one("#search-field").setStyle("width",e+"px")):(this.get("container").removeAttribute("style"),this.get("container").one("#search-field").removeAttribute("style"))},clearSearchField:function(e){this.get("container").one("#search-field").set("value","")},updateAutosuggestItems:function(e){var t=this.get("container"),n=t.one("#search-field").get("value");e&&e.halt();if(this.get("context"))return;this.fire("parentViewEvent","update-autosuggest-items",n)},handleSearchFieldFocus:function(t){var n=this.get("container"),r=n.one(".search-form"),i,s=this;t.halt(),n.hasClass("focus")||(n.addClass("focus"),n.addClass("expanded"),this.expandTimer&&clearTimeout(this.expandTimer),this.get("context")||(i=this.registerEventHandler(r.on("transitionend",function(){s.detachRegisteredEvent(i),s.updateAutosuggestItems(),n.hasClass("expanded")&&(s.fire("parentViewEvent","enable-autosuggest"),s.firstAutosuggestView||(e.rapidTracker.beacon(s.name,"autosuggestShow"),s.firstAutosuggestView=!0))}))))},blurSearchBar:function(){clearTimeout(this.expandTimer),this.expandTimer=setTimeout(function(){var t=this.get("container"),n=this.get("context"),r=e.one(e.config.doc.activeElement);r.hasClass("autosuggest-selectable-item")||(t.removeClass("focus"),t.removeClass("autosuggest-active"),(!n||!n.type)&&t.one("#search-field").get("value").length===0&&t.removeClass("expanded"),this.fire("parentViewEvent","disable-autosuggest"))}.bind(this),t)},handleSearchFieldBlur:function(e){e.halt(),e.relatedTarget&&e.relatedTarget.hasClass("search-icon-button")?this.executeSearch():this.blurSearchBar()},handleAutosuggestBlur:function(){this.blurSearchBar()},handleSearchFieldKeydown:function(t){var n=t.keyCode,r=t.target;switch(n){case 27:t.halt(),this.blurSearchField();break;case 38:t.halt(),this.fire("parentViewEvent","autosuggest-keyboard-nav","up");break;case 40:t.halt(),this.fire("parentViewEvent","autosuggest-keyboard-nav","down");break;case 8:e.fluid.getTextFieldCursorPosition(r)===0&&e.fluid.getTextFieldSelection()===""&&this.removeContext()}},destructor:function(){clearTimeout(this.expandTimer),this.expandTimer=null}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-autosuggest-field","hermes-template-search-pill","search-url","autosuggest-context-results-models","storage-helper","search-autosuggest-items-list-view","url-helper"],optionalRequires:["fluid"],langBundles:["search","common","groups"]});
YUI.add("hermes-lang-groups_es-us",function(e,t){e.Intl.add("hermes/groups","es-US",{POST_THRESHOLD_EVER:["Los miembros pueden publicar ",{type:"plural",valueName:"count",options:{one:"<b>${#}</b> elemento",other:"<b>${#}</b> elementos"}}," en el conjunto."],POST_THRESHOLD_DAY:["Cada d\u00eda, los miembros pueden publicar ",{type:"plural",valueName:"count",options:{one:"<b>${#}</b> elemento",other:"<b>${#}</b> elementos"}}," en el conjunto."],POST_THRESHOLD_MONTH:["Cada mes, los miembros pueden publicar ",{type:"plural",valueName:"count",options:{one:"<b>${#}</b> elemento",other:"<b>${#}</b> elementos"}}," en el conjunto."],POST_THRESHOLD_WEEK:["Cada semana, los miembros pueden publicar ",{type:"plural",valueName:"count",options:{one:"<b>${#}</b> cosa",other:"<b>${#}</b> cosas"}}," en el muro."],ACCEPTED_CONTENT_TYPES:["Tipos de contenido aceptados:"],ACCEPTED_SAFETY_LEVELS:["Niveles de seguridad aceptados:"],PHOTOS:["Fotos"],VIDEOS:["Videos"],IMAGES:["Im\u00e1genes"],SCREENSHOTS:["Capturas de pantalla"],ART:["Arte"],SAFE:["Seguro"],MODERATE:["Moderado"],RESTRICTED:["Restringido"],SEE_ALL_DISCUSSIONS:["Ver todas las discusiones"],DISCUSSION_TITLE:["T\u00edtulo"],DISCUSSION_AUTHOR:["Autor"],DISCUSSION_REPLIES:["Respuestas"],DISCUSSION_LAST_POST:["\u00daltima publicaci\u00f3n"],DISCUSSION_LAST_REPLIER:["\u00daltimo en responder"],NO_DISCUSSIONS:["\u00a1S\u00e9 el primero en empezar una discusi\u00f3n en el grupo!"],BE_THE_FIRST:["\u00a1Se el primero en a\u00f1adir una foto en el grupo!"],BE_THE_FIRST_JOIN:["\u00a1Ay\u00fadanos a que empiece este grupo: haz clic en el bot\u00f3n 'Entrar' en la parte de arriba!"],BE_THE_FIRST_SIGN_IN:["\u00a1Ay\u00fadanos a que empiece este grupo: inscr\u00edbete y colabora con fotos!"],NO_PHOTOS_BY_YOU:["No has a\u00f1adido fotos a\u00fan. \u00bfQu\u00e9 est\u00e1s esperando?"],WHO_IS_ME:["\u00bfQui\u00e9n es este 'yo' de que hablas?"],INVALID_PERSON:["\u00a1Nunca escuch\u00e9 de ellos! \u00a1Lo sentimos!"],ADD_SOME_PHOTOS:["A\u00f1adir algunas fotos"],NO_PHOTOS:["No hay fotos en este grupo"],POOL_PREVIEW_HEADER:["Conjunto de fotos"],POOL_HEADER:["Conjunto del grupo"],ADD_PHOTO:["A\u00f1adir foto"],VIEW_X_PHOTOS:[{type:"plural",valueName:"count",options:{one:"Ver ${#} fotos",other:"Ver ${#} fotos"}}],DISCUSSIONS:["Discusiones"],ADD_TOPIC:["A\u00f1adir un tema"],SEARCH_DISCUSSIONS:["Buscar discusiones"],SEARCH_POOL:["Buscar conjunto"],ADD_A_TOPIC:["A\u00f1adir un tema"],TOP_CONTRIBUTORS:["Colaborador Destacado"],CONTRIBUTORS:["Colaboradores"],CONTRIBUTORS_RANK:["Posici\u00f3n"],CONTRIBUTORS_LATEST_PHOTO:["Fotos m\u00e1s recientes"],CONTRIBUTORS_PHOTOS:["Fotos"],CONTRIBUTORS_DISCUSSIONS:["Discusiones"],CONTRIBUTORS_JOINED_GROUP:["Se uni\u00f3 al grupo"],SEE_ALL_MEMBERS:["Ver a todos los miembros"],TOTAL_DISCUSSIONS:[{type:"plural",valueName:"count",options:{one:"${#} discusi\u00f3n en",other:"${#} discusiones en"}}," ","${groupname}"],DISCUSSION_STICKY:["Nota"],RANKING:["#","${count}"],BLAST_INVITED_MEMBER:["MIEMBRO"],BLAST_PENDING_MEMBER:["MIEMBRO"],BLAST_GROUP_MEMBER:["MIEMBRO"],BLAST_MODERATOR:["MODERADOR"],BLAST_ADMIN:["ADMIN"],SHARE:["Compartir"],EIGHTTEEN_PLUS_SIGNEDIN:["Este grupo es para mayores de 18 a\u00f1os \u00bfQuieres entrar?"],EIGHTEEN_PLUS_SIGNEDOUT:["Este grupo es para mayores de 18 a\u00f1os. Inscr\u00edbete para ver el grupo."],NO:["No"],YES:["S\u00ed"],GROUP_POOL_LOADING_ERROR:["Se produjo un error al subir el conjunto de fotos del grupo"],GROUP_DISCUSSION_LOADING_ERROR:["Se produjo un error al cargar la lista de discusiones del grupo"],GROUP_TOP_CONTRIBUTORS_LOADING_ERROR:["Se produjo un error al cargar la lista de los colaboradores destacados del grupo"],GROUP_DELETION_ERROR:["Se produjo un error al eliminar la foto... Int\u00e9ntalo nuevamente."],RETRY:["Reintentar"],ADDED_NOTIFICATION:['\u00a1Listo! \u00bfTe gustar\u00eda <a href="',"${url}",'">a\u00f1adir algo m\u00e1s</a>?'],NOT_ADDED_NOTIFICATION:['Eso ya est\u00e1 en el grupo. <a href="',"${url}",'">\u00bfQuieres intentar otra cosa?</a>'],PENDING_NOTIFICATION:['Tu foto o video se envi\u00f3 al grupo. Si el administrador del grupo lo aprueba, se mostrar\u00e1 en el conjunto del grupo. \u00bfQuieres <a href="',"${url}",'">a\u00f1adir otro elemento</a>?'],DONE_PENDING_NOTIFICATION:["\u00a1Todo listo! No hay nada m\u00e1s que moderar."],GROUP_ADD_PENDING:["Falta la aprobaci\u00f3n del administrador"],DELETED_NOTIFICATION:["Este elemento se elimin\u00f3 del conjunto."],POOL_MEMBERS_ONLY:["El conjunto de este grupo es s\u00f3lo para miembros."],DISCUSSION_MEMBERS_ONLY:["La discusi\u00f3n en este grupo es s\u00f3lo para miembros."],DISCUSSION_MEMBERS_ONLY_INTERSTITIAL:["Puedes unirte a la conversaci\u00f3n con el bot\u00f3n Unirse a grupo que se encuentra arriba. Tambi\u00e9n puedes hacer clic en Descripci\u00f3n general para obtener m\u00e1s informaci\u00f3n sobre el grupo.\n"],REMOVE_PHOTO:["\u00bfDeseas eliminar esta foto del conjunto del grupo?"],PENDING_COUNT_NOTIFICATION:['Tienes<a href="',"${url}",'">',{type:"plural",valueName:"pendingCount",options:{zero:"0 fotos",one:"${#} foto",other:"${#} fotos"}}," pendientes</a>"],X_GROUPS:[{type:"plural",valueName:"count",options:{one:"${#} grupo",other:"${#} grupos"}}],HAS_NONE:["Parece que no perteneces a un grupo, as\u00ed que a continuaci\u00f3n te mostramos una lista de los que podr\u00edan interesarte."],SIGNED_OUT:["Los grupos representan una excelente manera de compartir contenido y conversaciones, ya sea de forma privada o con todo el mundo. De seguro existe un grupo para cada persona. Si no encuentras uno que te guste, puedes crear uno propio."],LAST_REPLY_TIME_AGO:['<a href="',"${replyurl}",'" data-track="groupDiscussionTopicLastReplyClick">',"${time}"," hace </a>"],MEMBERS_ONLY_POOL_JOIN:["Solo los miembros puede ver este conjunto de grupos. Haz clic en Descripci\u00f3n general para obtener m\u00e1s informaci\u00f3n sobre el grupo o en el bot\u00f3n Unirse a grupo, que se encuentra arriba, para... bueno, \u00a1unirte!"],MEMBERS_ONLY_POOL_SIGN_IN
:["Solo los miembros puede ver este conjunto de grupos. Inscr\u00edbete para unirte al grupo."],PRIVATE_GROUP:["Llegaste a un grupo privado."],RETURN_HOME:["Volver al inicio"],DISCUSSIONS_DISABLED:["En este grupo no se permiten las discusiones."],GO_TO_GROUP_HOME:["Ir al inicio del grupo"],GROUP_JOIN_RULES_DIALOG_TITLE:["Reglas del grupo"],GROUP_JOIN_RULES_DIALOG_MESSAGE:["Si aceptas las reglas entonces te puedes unir al grupo."],GROUP_JOIN_RULES_DIALOG_ACCEPT:["Acepto"],GROUP_JOIN_RULES_DIALOG_DECLINE:["No, gracias"],GROUP_JOIN_ERROR:["Ocurri\u00f3 un error al entrar al grupo."],GROUP_LEAVE_ERROR:["Ocurri\u00f3 un error al salir del grupo."],GROUPS:["Grupos"],GROUPS_LIST_LOADING_ERROR:['Ocurri\u00f3 un error al cargar los grupos. Para intentarlo de nuevo <br>haz clic en <a class="retry">Volver a cargar</a>.'],GROUPS_LIST_ERROR_HEADER:["Error al cargar los grupos"],CONTRIBUTORS_DISCUSSION_TOPICS:["Temas"],GROUPS_LIST_GROUPS:["Grupos"],GROUPS_LIST_MEMBERS:["Miembros"],GROUPS_LIST_PHOTOS:["Fotos"],GROUPS_LIST_TOPICS:["Temas"],GROUPS_LIST_LATEST:["M\u00e1s reciente"],GROUPS_LIST_LATEST_DISCUSSION:["\u00daltima publicaci\u00f3n"],GROUPS_LIST_LATEST_PHOTO:["Fotos m\u00e1s recientes"],GROUPS_LEAVE_WARNING_TITLE:["\u00bfSalir de ","${title}","?"],GROUPS_LEAVE_WARNING:['\u00bfRealmente quieres salir de este grupo "',"${title}",'?"'],GROUPS_LEAVE_WARNING_LAST_MEMBER:['\u00bfRealmente quieres salir de este grupo "',"${title}",'?" Puesto que tu eres la \u00faltima persona en este grupo, el grupo se borrar\u00e1 si te vas.'],GROUPS_LEAVE_WARNING_ADMIN:['\u00bfRealmente quieres salir de este grupo "',"${title}",'?" Si eres el \u00faltimo administrador de este grupo, el miembro m\u00e1s antiguo ascender\u00e1 a administrador despu\u00e9s de que te vayas.'],GROUPS_LEAVE_WARNING_REMOVE_PHOTOS:["<div class='checkbox-prompt'><label><input type=\"checkbox\">\u00bfTambi\u00e9n deseas eliminar todos los videos y las fotos que a\u00f1adiste al grupo?</input></label></div>"],GROUPS_LEAVE_WARNING_LEAVE_BUTTON:["Salir de este grupo"],GROUPS_LEAVE_WARNING_CANCEL_BUTTON:["Cancelar"],EMPTY_BLAST:["No hay disparos de administrador."],ADD_BLAST:["\u00bfPor qu\u00e9 no a\u00f1ades una?"],REMOVING_BLAST:["Quitando disparo..."],CREATE_BLAST:["A\u00f1adir disparo de grupo de administradores"],BACK_TO_OVERVIEW:["Volver al resumen de grupo"],GROUP_POOL:["Conjunto del grupo"],NO_VISIBLE_PHOTOS:["${screenname}"," no tiene fotos que tu puedas ver en el conjunto ","${groupTitle}"," "],UPDATE_BLAST_ERROR:["En este momento no se pudo actualizar el disparo de grupo"],DELETE_BLAST_ERROR:["En este momento no se pudo eliminar el disparo de grupo"],LONG_BLAST_ERROR:[{type:"plural",valueName:"count",options:{one:"El disparo de grupo es de ${#} caracter; debe ser menor a 496 caracteres.",other:"El disparo de grupo es de ${#} caracteres; debe ser menor a 496 caracteres."}}],GROUPS_LIST_BELONG_HEADER:["Grupos a los que perteneces"],GROUPS_LIST_BELONG_MORE:["Ver todos los grupos a los que perteneces"],PENDING:[{type:"plural",valueName:"count",options:{one:"${#} pendiente",other:"${#} pendientes"}}],GROUPS_ADMIN:["Grupos que administras"],GROUPS_MODERATED:["Grupos que moderas"],GROUPS_BELONG:["Grupos a los que perteneces"],GROUPS_FAVED:["Grupos que marcaste como favoritos"],VIEW_ALL_GROUPS_ADMIN:["Ver todos los grupos que administras"],VIEW_ALL_GROUPS_MODERATED:["Ver todos los grupos que moderas"],GROUP_DESCRIPTION:["Descripci\u00f3n del grupo"],GROUP_RULES:["Reglas del grupo"],GROUP_ADDITIONAL_INFO:["Informaci\u00f3n adicional"],PENDING_MEMBER_COUNT_NOTIFICATION:['Tienes <a href="',"${url}",'">',{type:"plural",valueName:"pendingCount",options:{zero:"0 miembros pendientes",one:"${#} miembro pendiente",other:"${#} miembros pendientes"}},"</a>"],BLAST_DATE_ADDED:[{type:"date",valueName:"blastDateAdded",format:"long"}],GROUP_DISCUSSION_START:["Iniciar discusi\u00f3n"],GROUP_DISCUSSION_DELETE_REPLY:["Eliminar la respuesta"],GROUP_DISCUSSION_CONFIRM_DELETE:["\u00bfEst\u00e1s seguro de que deseas eliminar esta respuesta?"],GROUP_DISCUSSION_DELETE:["Eliminar"],GROUP_DISCUSSION_DELETE_FAILED:["No se pudo eliminar la respuesta; int\u00e9ntalo de nuevo."],GROUP_DISCUSSION_PUBLISH_FAILED:["No se pudo publicar la respuesta; int\u00e9ntalo de nuevo."],GROUP_DISCUSSION_PUBLISH_REPLY:["Publicar respuesta"],GROUP_DISCUSSION_RECENT_DISCUSSIONS:["Discusiones"],GROUP_DISCUSSION_POST_REPLY:["Publicar la respuesta"],GROUP_DISCUSSION_PUBLISH:["Publicar respuesta"],GROUP_DISCUSSION_PREVIEW:["Cargar la vista previa"],GROUP_DISCUSSION_EDIT_FAILED:["No se pudo editar la respuesta; int\u00e9ntalo de nuevo."],GROUP_DISCUSSION_EDIT_REPLY:["Editar la respuesta"],GROUP_DISCUSSION_PREVIEW_EDIT_FAILED:["No se pudo cargar la vista previa de la edici\u00f3n; int\u00e9ntalo de nuevo."],GROUP_DISCUSSION_PREVIEW_EDIT:["Cargar la vista previa de la edici\u00f3n"],GROUP_DISCUSSION_PREVIEW_REPLY_FAILED:["No se pudo cargar la vista previa de la respuesta; int\u00e9ntalo de nuevo."],GROUP_DISCUSSION_PREVIEW_REPLY:["Cargar la vista previa de la respuesta"],GROUP_DISCUSSION_POST_LOCKED_WITH_LINK:["Se bloque\u00f3 la discusi\u00f3n grupal en ","${groupname}",'. (<a href="',"${unlockUrl}",'">\u00bfdeseas desbloquearla?</a>)'],GROUP_DISCUSSION_POST_LOCKED:["Este tema se bloque\u00f3."],GROUP_DISCUSSION_REPLY_EDITED:["Publicada el ","${createdAgo}",". Editada el ","${editedAgo}"],GROUP_DISCUSSION_REPLY_EDITED_WITH_ROLE:["Publicada el ","${createdAgo}",". Editada por ","${editAuthor}"," (","${editRole}",") ","${editedAgo}"],GROUP_DISCUSSION_REPLY_EDITED_BY_STAFF:["Publicada el ","${createdAgo}",". Editada por ","${editAuthor}"," (personal) ","${editedAgo}"],GROUP_DISCUSSION_DELETE_TOPIC:["Eliminar el tema"],GROUP_DISCUSSION_CONFIRM_DELETE_TOPIC:["\u00bfEst\u00e1s seguro de que deseas eliminar este tema?"],GROUP_DISCUSSION_STICKY_FAILED:["No se pudo seleccionar/deseleccionar este tema como pegajoso.  Int\u00e9ntalo de nuevo."],GROUP_DISCUSSION_STICKY:["Nota"],GROUP_DISCUSSION_LOCK_FAILED:["No se pudo bloquear/desbloquear este tema.  Int\u00e9ntalo de nuevo."
],GROUP_DISCUSSION_LOCK:["Bloquear el tema"],DISCUSSION_REPLY_REPLY_PROMPT:["Haz clic para responder a la respuesta"],DISCUSSION_REPLY_PERMALINK_PROMPT:["Enlace permanente"],DISCUSSION_REPLY_DELETE_PROMPT:["Haz clic para eliminar esta respuesta"],DISCUSSION_REPLY_EDIT_PROMPT:["Haz clic para editar esta respuesta"],GROUP_DISCUSSION_LOCK_CONFIRMATION_TITLE:["Bloquear el tema"],GROUP_DISCUSSION_LOCK_CONFIRMATION:["\u00bfEst\u00e1s seguro de que deseas bloquear este tema?"],GROUP_DISCUSSION_LOCK_BUTTON:["Bloquear"],GROUP_DISCUSSION_UNLOCK_CONFIRMATION_TITLE:["Desbloquear el tema"],GROUP_DISCUSSION_UNLOCK_CONFIRMATION:["\u00bfEst\u00e1s seguro de que deseas desbloquear este tema?"],GROUP_DISCUSSION_UNLOCK_BUTTON:["Desbloquear"],DISCUSSION_MORE_LINK:["M\u00e1s..."],DISCUSSION_SEARCH_LINK:["Buscar las discusiones de este grupo"],DISCUSSION_FORMAT_REPLY:["\u00bfDeseas darle formato a tu respuesta?"],GROUP_DISCUSSION_FORMATTING_TITLE:["Formato de las discusiones"],GROUP_DISCUSSION_FORMATTING_CLOSE:["Cerrar"],SIGN_IN_TO_REPLY:["Iniciar sesi\u00f3n para responder"],DISCUSSION_SIGN_IN_TO_REPLY:["\u00a1Inicia sesi\u00f3n para responder!"],GROUP_DISCUSSION_PUBLISH_FAILED_LOCKED:["No se pudo publicar la respuesta. Este tema ahora est\u00e1 bloqueado."],GROUP_DISCUSSION_PUBLISH_FAILED_LOCKED_OR_NONMEMBER:["No se pudo publicar la respuesta. Este tema est\u00e1 bloqueado o no eres un miembro del grupo."],GROUP_DISCUSSION_PUBLISH_FAILED_DELETED:["No se pudo publicar la respuesta.  Se elimin\u00f3 este tema."],GROUP_DISCUSSION_GROUP_LOCKED:["Todas las discusiones est\u00e1n bloqueadas para este grupo"],GROUP_DISCUSSION_GROUP_LOCKED_WITH_LINK:['Todos los debates est\u00e1n bloqueados para este grupo (<a title="unlock group discussions?" href="',"${unlockUrl}",'">\u00bfdeseas desbloquear?</a>)'],CREATED_YEAR:["Desde ","${createdYear}"],UPDATED_TIME_AGO:["${updatedAgo}","Actualizado"],GROUP_JOIN:["Unirse al grupo"],GROUP_JOIN_SHORT:["Unir"],GROUP_JOINED:["Se uni\u00f3"],GROUP_JOIN_REQUESTED:["Solicitud enviada"],GROUP_JOIN_REQUESTED_SHORT:["Pendiente"],GROUP_LEAVE_GROUP:["Salir del grupo"],GROUP_LEAVE_GROUP_SHORT:["Salir"],PHOTOS_LINK_LABEL:["Fotos"],DISCUSSIONS_LINK_LABEL:["Debates"],ADMIN_LINK_LABEL:["Administraci\u00f3n"],ERROR_LOADING:["Se produjo un error al cargar este grupo. Int\u00e9ntalo de nuevo m\u00e1s tarde."],VISIBLE_REPLIES:["(","${from}"," a ","${to}"," de ","${total}"," respuestas)"],JOIN_GROUP_TO_START_DISCUSSION:["\u00danete al grupo para iniciar una discusi\u00f3n!"],POOL_PREVIEW:[{type:"plural",valueName:"count",options:{one:"Se muestra ${#} fila",other:"Se muestran ${#} filas"}}],GROUP_BAN_MEMBER:["Bloquear al miembro"],GROUP_BAN_MEMBER_FAILED:["No se puede bloquear al miembro en este momento.  Vuelve a intentarlo."],GROUP_BAN_MEMBER_CONFIRM:["\u00bfEst\u00e1s seguro de que quieres bloquear a este miembro en el grupo?"],GROUPS_BAN_MEMBER_BUTTON:["Bloquear al miembro"],GROUPS_BAN_MEMBER_CANCEL_BUTTON:["Cancelar"],GROUP_BAN_MEMBER_SUCCESS:["Se bloque\u00f3 correctamente al miembro en este grupo"],GROUP_BAN_MEMBER_FAILED_ALREADY:["No se puede bloquear al miembro en este momento.  Es posible que ya est\u00e9n bloqueados en este grupo."],GROUP_MEMBERS_SIGNIN:["Inicia sesi\u00f3n para ver los miembros del grupo."],GROUP_MEMBERS_ERROR_LOADING:["Se produjo un error al cargar a los miembros de este grupo. Int\u00e9ntalo de nuevo m\u00e1s tarde."],GROUP_MEMBERS_LOADMORE:["Cargar m\u00e1s miembros"],GROUP_LANDING_HEADLINE:["Los grupos de Flickr son un excelente medio para compartir fotos, publicar comentarios y abrir debates sobre un tema en com\u00fan."],GROUP_RECOMMENDED_GET_STARTED:["\u00danete a estos Grupos de Flickr"],GROUP_RECOMMENDED_JOIN_A_GROUP:["\u00a1\u00danete a un grupo!"],SIGN_IN_BEFORE_JOIN_TITLE:["\u00a1Encontraste un grupo para unirte!"],SIGN_IN_BEFORE_JOIN_MESSAGE:["Fant\u00e1stico. Simplemente, inicia sesi\u00f3n para unirte a ","${name}","."],SIGN_UP_AND_JOIN_MESSAGE:["\u00danete a Flickr para ser miembro de ","${name}","."],SIGN_IN_AND_JOIN:["Inicia sesi\u00f3n y \u00fanete"],SIGN_UP_BEFORE_CREATE_TITLE:["\u00a1Crea un nuevo grupo de Flickr!"],SIGN_UP_AND_CREATE_MESSAGE:["\u00danete a Flickr y crea un nuevo grupo."],GROUPS_SUBNAV_MEMBERS:[{type:"plural",valueName:"count",options:{one:"miembro",other:"miembros"}}],GROUPS_SUBNAV_DISCUSSIONS:[{type:"plural",valueName:"count",options:{one:"debate",other:"debates"}}],GROUPS_SUBNAV_PHOTOS:[{type:"plural",valueName:"count",options:{one:"foto",other:"fotos"}}],GROUPS_COVER_ATTRIBUTION:["Foto por ","${username}"],GROUPS_BACK_TO_MINE:["Volver a mis grupos"],GROUPS_BACK_TO_OTHERS:["Volver a los grupos de ","${username}"],GROUPS_FOUNDED:["Fundado el ",{type:"date",valueName:"intlDate",format:"long"}],NO_PUBLIC_GROUPS:["Este usuario no se uni\u00f3 a ning\u00fan grupo p\u00fablico."],RECOMMENDED_GROUPS:["Grupos recomendados:"],GROUP_POOL_CONTAINS_NO_PUBLIC_PHOTOS:["No hay fotos p\u00fablicas en el muro del grupo"],GROUP_INVITE_ONLY_HEADER:["La membres\u00eda en ","${groupName}"," es solo por invitaci\u00f3n."],GROUP_INVITE_ONLY_DESC:["Simplemente, ponte en contacto con el administrador responsable de las invitaciones para hacerle saber que est\u00e1s interesado en inscribirte."],GROUP_INVITE_ONLY_CONTACT_ADMIN:["Contactar al administrador del grupo"],GROUP_INVITE_ONLY_SEND:["Enviar"],GROUP_INVITE_EMPTY_MESSAGE:["El mensaje est\u00e1 vac\u00edo."],GROUP_INVITE_PENDING:["Tu solicitud para unirte a ","${groupName}"," est\u00e1 a la espera de la aprobaci\u00f3n del moderador. \u00a1No te impacientes!"],GROUP_SLOW:["En este momento, estamos teniendo problemas para mostrar este grupo. Vuelve a intentarlo."],RESET_FILTER:["Restablecer filtro"]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-autosuggest-bar",function(e,t){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s;return'<div id="autosuggest">\n	<div class="search-icon"></div>\n	<form action="/search/" method="get" role="search">\n		<input type="text" name="q" value="'+e.escapeExpression((s=(s=n.searchTerm||(t!=null?t.searchTerm:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"searchTerm",hash:{},data:i}):s))+'" id="autosuggest-input" class="yui3-aclist-input" autocomplete="off" aria-label="Search" role="textbox">\n	</form>\n</div>'},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/autosuggest-bar",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-autosuggest-item",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return' style="background-image: url('+e.escapeExpression((s=(s=n.icon||(t!=null?t.icon:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"icon",hash:{},data:i}):s))+');"'},3:function(e,t,n,r,i){return"<i></i>"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'<div class="autosuggest-item" data-type="'+l((o=(o=n.type||(t!=null?t.type:t))!=null?o:a,typeof o===f?o.call(u,{name:"type",hash:{},data:i}):o))+'" data-section="'+l((o=(o=n.section||(t!=null?t.section:t))!=null?o:a,typeof o===f?o.call(u,{name:"section",hash:{},data:i}):o))+'" data-destination="'+l((o=(o=n.url||(t!=null?t.url:t))!=null?o:a,typeof o===f?o.call(u,{name:"url",hash:{},data:i}):o))+'">\n	<div class="autosuggest-icon"'+((s=n["if"].call(u,t!=null?t.icon:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+">\n		"+((s=n.unless.call(u,t!=null?t.icon:t,{name:"unless",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))!=null?s:"")+'\n	</div>\n	<div class="autosuggest-text">\n		<div>'+l((o=(o=n.title||(t!=null?t.title:t))!=null?o:a,typeof o===f?o.call(u,{name:"title",hash:{},data:i}):o))+"</div><span>"+l((o=(o=n.subtitle||(t!=null?t.subtitle:t))!=null?o:a,typeof o===f?o.call(u,{name:"subtitle",hash:{},data:i}):o))+"</span>\n	</div>\n</div>"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/autosuggest-item",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("autosuggest-view",function(e){var t=require("lib/helpers/type-validator");"use strict",e.namespace("Views")[this.name]=e.Base.create("autosuggest-view",e.FlickrView,[],{langBundles:this.details.langBundles,START_MATCH_MULTIPLIER:2,MATCH_THRESHOLD:0,MAX_RESULTS_TO_DISPLAY:9,MATCH_DISTANCE_THRESHOLD:.2,MID_TOKEN_MATCH_QUERY_LENGTH_THRESHOLD:4,COVERAGE_SCORE_QUERY_LENGTH_THRESHOLD:3,initializer:function(e){var t=this.appContext.getViewer();return e.contextWeights?this.contextWeights=e.contextWeights:(this.contextWeights={global_global:{tags:1,people:1,groups:1}},t.signedIn&&(this.contextWeights[t.nsid+"_user"]={people:1,groups:1})),this.searchId=e.searchId,e.defaultSearchScope?this.defaultSearchScope=e.defaultSearchScope:this.searchId?this.defaultSearchScope=null:this.defaultSearchScope={},this.inputNode=null,this.resultItems=[],this},loadState:function(){var t=this;return this.searchId?this.appContext.getModel("search-photos-models",this.searchId).then(function(e){t.searchModel=e}):e.Promise.resolve()},buildContainer:function(){var t,n;return this.searchModel?(n=this.searchModel.getValue("apiParams"),t=n.text||n.tags||""):t="",this.setContainerWithTemplate("autosuggest-bar",{searchTerm:e.flutil.unescape(t)}),this},activate:function(){var t=this;return this.getContextModels().then(function(){t.determineContext(),t.defaultSearchScope||(t.defaultSearchScope=t.getSearchScope(t.searchModel.getValue("apiParams"))),t.buildSearchItems()}),this.autoCompleteList=e.use("autocomplete",function(e){t.inputNode=e.one("#autosuggest-input"),t.inputNode.plug(e.Plugin.AutoComplete,{minQueryLength:0,activateFirstItem:t.hasDefaultSearchItem,source:function(){return t.resultItems.concat(t.searchItems)},resultFilters:function(e,n){var r,i,s=0,o=0,u={},a,f,l,c;r=t.buildTokenRegExps(e),i=n.filter(function(n){var i,s,o=n.raw.type===1||e.length<t.MID_TOKEN_MATCH_QUERY_LENGTH_THRESHOLD,a=e.length<t.COVERAGE_SCORE_QUERY_LENGTH_THRESHOLD;return n.raw.isSearchItem?!0:(i=n.raw.matches.reduce(function(e,n){return e+n.weight*t.maxMatch(r,n.token,o,a)},0),n.matchScore=i/n.raw.matches.length,s=e.length?i>t.MATCH_THRESHOLD:!0,s&&(u[n.raw.type]=u[n.raw.type]||0,u[n.raw.type]++),s)});for(f=0,l=t.searchItems.length;f<l;f++)c=t.searchItems[f].resultType,u[c]?t.searchItems[f].section=t.searchItems[f].startSection:t.searchItems[f].section=t.searchItems[f].endSection;return i=i.sort(function(e,n){var r=e.raw.section-n.raw.section,i;if(r===0)return e.raw.isSearchItem?-1:n.raw.isSearchItem?1:(i=n.matchScore-e.matchScore,Math.abs(i)<t.MATCH_DISTANCE_THRESHOLD?n.raw.score-e.raw.score:i);return r}),a=t.allocateTypeCounts(u,t.MAX_RESULTS_TO_DISPLAY),i=i.filter(function(e){return e.raw.isSearchItem?!0:(e.raw.type===o?s++:(o=e.raw.type,s=1),s<=a[o])}),i},resultFormatter:function(e,n){return n.map(function(e){var n;return e.raw.type===2?e.raw.members===1?n=t.intlMessage({intlName:"autosuggest.MEMBER"}):n=t.intlMessage({intlName:"autosuggest.MEMBERS",count:e.raw.members}):n=e.raw.subtitle||"",t.templates("autosuggest-item")({title:e.raw.title,subtitle:n,type:["tag","people","group","button-people","button-group"][e.raw.type],section:e.raw.section,icon:e.raw.type===0||e.raw.isSearchItem?"":t.buildIconURL(e.raw)})})},resultTextLocator:function(e){return e.isSearchItem?t.get("container").one("#autosuggest-input").get("value"):e.title}}),t.registerEventHandler(t.inputNode.on("focus",function(){e.rapidTracker.beacon(t.name,"autosuggestInputFocus"),t.fire("open"),t.inputNode.ac.fire("query",{inputValue:t.inputNode.get("value"),query:t.inputNode.get("value")})})),t.registerEventHandler(t.inputNode.on("click",function(){t.fire("open"),t.inputNode.ac.fire("query",{inputValue:t.inputNode.get("value"),query:t.inputNode.get("value")})})),t.inputNode.ac.after("query",function(){var e=t.get("container").one(".autosuggest-item");t.get("container").all(".autosuggest-item").each(function(t){var n;e.getAttribute("data-section")!==t.getAttribute("data-section")&&e.get("parentNode").addClass("separator"),e=t,n=t.getAttribute("data-type"),(n==="tag"||n==="button-group"||n==="button-people")&&t.get("parentNode").setAttribute("data-is-short","true")})}),t.inputNode.ac.on("select",function(e){var n=t.itemSelected(e.result);e.originEvent.stopImmediatePropagation(),n||(t.inputNode.focus(),e.halt())}),t.registerEventHandler(t.inputNode.on("keydown",function(n){var r=t.inputNode.get("value");n.keyCode===13&&(n.halt(),r&&(e.rapidTracker.beacon(t.name,"autosuggestEnterKeydown"),t.close(),t.itemSelected(r)))})),t.registerEventHandler(t.get("container").one(".search-icon").on("click",function(n){var r=t.inputNode.get("value");r&&(e.rapidTracker.beacon(t.name,"autosuggestSearchIconClick"),t.itemSelected(r))}))}),this},close:function(){this.inputNode&&this.inputNode.ac&&this.inputNode.ac.hide()},itemSelected:function(t){var n,r,i,s=this.searchModel&&e.merge(this.searchModel.getValue("apiParams"))||{};if(typeof t=="string"||!t.raw.isSearchItem&&t.raw.type===0)r="/search?",delete s.text,delete s.tags,typeof t=="string"?s.text=t:(s.text=t.raw.title,e.rapidTracker.beacon(this.name,"autosuggestSuggestedPhotoSearchSelect")),s=e.merge(this.clearParamsExceptSearchScope(s),this.defaultSearchScope);else{if(!t.raw.isSearchItem)return s={},t.raw.pathalias?n=t.raw.pathalias:n=t.raw.nsid,t.raw.type===1?(r="/photos/"+n,e.rapidTracker.beacon(this.name,"autosuggestPersonSelect")):t.raw.type===2&&(r="/groups/"+n,e.rapidTracker.beacon(this.name,"autosuggestGroupSelect")),this.classicNavigate(r),!0;i=this.get("container").one("#autosuggest-input").get("value");if(!i)return e.rapidTracker.beacon(this.name,"autosuggestSearchButtonItemSelectEmpty"),!1;if(t.raw.searchScope==="people")return e.rapidTracker.beacon(this.name,"autosuggestPeopleSearchItemSelect"),r="/search/people/?",s={q:i},this.classicNavigate(r+e.QueryString.stringify(s)),!0;if(t.raw.searchScope==="groups")return e.rapidTracker.beacon(this.name,"autosuggestGroupsSearchItemSelect"),r="/search/groups/?",s={q:i},this.classicNavigate
(r+e.QueryString.stringify(s)),!0;t.raw.isDefault?e.rapidTracker.beacon(this.name,"autosuggestDefaultPhotoSearchItemSelect"):e.rapidTracker.beacon(this.name,"autosuggestOtherPhotoSearchItemSelect"),r="/search?",s.text=i,s=this.clearParamsExceptSearchScope(s),s=e.merge(s,t.raw.searchScope)}return e.SearchHelper.clearAdvancedSearchParams(s),this.appContext.flapp.navigate(r+e.QueryString.stringify(s)),!0},determineContext:function(){var e={},t=this.appContext.getViewer();this.searchModel?(e.global_global={people:1,groups:1},t.signedIn&&(e[t.nsid+"_user"]={people:1,groups:1}),this.groupInfo?e[this.groupInfo.nsid+"_group"]={tags:1,people:1,groups:1}:this.personInfo?e[this.personInfo.nsid+"_user"]={tags:1,people:1,groups:1}:(t.signedIn&&(e[t.nsid+"_user"]={tags:1,people:1,groups:1}),e.global_global={tags:1,people:1,groups:1})):e=this.contextWeights,this.setWeights(e)},clearParamsExceptSearchScope:function(e){return delete e.user_id,delete e.group_id,delete e.contacts,delete e.faves,e},getSearchScope:function(e){var t=["user_id","group_id","contacts","faves"],n,r,i={};for(n=0,r=t.length;n<r;n++)e[t[n]]&&(i[t[n]]=e[t[n]]);return i},buildSearchItems:function(){this.searchItems=[{type:3,title:this.intlMessage({intlName:"autosuggest.SEARCH_PEOPLE"}),searchScope:"people",isSearchItem:!0,resultType:1,startSection:1,endSection:3},{type:4,title:this.intlMessage({intlName:"autosuggest.SEARCH_GROUPS"}),searchScope:"groups",isSearchItem:!0,resultType:2,startSection:2,endSection:4}],this.sectionMap={0:"0",1:"1",2:"2"}},getContextModels:function(){var n=this,r,i,s=null,o=null;return this.searchModel?(r=this.searchModel.getValue("apiParams"),r.group_id?(i={},t.nsid(r.group_id)?i.id=r.group_id:i.pathAlias=r.group_id,s=n.appContext.getModel("group-pool-models",i)):s=e.Promise.resolve(),r.user_id?(i={},t.nsid(r.user_id)?i.id=r.user_id:i.pathAlias=r.user_id,o=n.appContext.getModel("person-models",i)):o=e.Promise.resolve(),e.Promise.all([s,o]).then(function(e){e[0]&&(n.groupInfo={name:e[0].getValue("group").getValue("title"),nsid:e[0].id}),e[1]&&(n.personInfo={name:e[1].getValue("displayname"),nsid:e[1].getValue("nsid")})})):e.Promise.resolve()},classicNavigate:function(t){window.location=e.url(t)},buildIconURL:function(t){return e.URLHelper.getBuddyIconURL(t.nsid,Math.ceil(t.iconserver/1e3),t.iconserver)},buildTokenRegExps:function(t){var n=[],r,i,s,o,u=t.split(" ").map(e.Text.AccentFold.fold.bind(e.Text.AccentFold));for(r=0,i=u.length;r<i;r++)s=u[r],s&&(o=this.escapeForRegExp(s),n.push({re:new RegExp(o,"i"),numChars:s.length}));return n},escapeForRegExp:function(e){return e=decodeURIComponent(e),e.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,"\\*").replace(/\$/g,"\\$").replace(/\^/g,"\\^").replace(/\?/g,"\\?").replace(/\|/g,"\\|").replace(/\+/g,"\\+").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\[/g,"\\[").replace(/\]/g,"\\]")},maxMatch:function(e,t,n,r,i){var s=this,o=t.length,u;return u=e.map(function(e){var r=t.match(e.re),u=0,a;return r&&(a=r.index===0,i?u=1:u=e.numChars/o,n&&!a&&(u=0),a&&(u*=s.START_MATCH_MULTIPLIER)),u}),u.length?Math.max.apply(Math,u):0},allocateTypeCounts:function(e,t){var n=Object.keys(e),r=n.length,i={},s,o=n.reduce(function(t,n){return t+e[n]},0),u=0,a,f;t=Math.min(t,o),s=Math.floor(t/n.length);for(a=0;a<r;a++)f=n[a],s<=e[f]?i[f]=s:i[f]=e[f],u+=i[f];if(u===t)return i;a=0;while(u<t)a%=r,f=n[a],e[f]>i[f]&&(i[f]++,u++),a++;return i},setWeights:function(e){var t=this,n,r=[];this.contextWeights=e;for(n in this.contextWeights)this.appContext.getModel("autosuggest-context-results-models",n).then(function(e){r.push(e),t.computeResultItems(r),t.inputNode&&t.inputNode.ac&&t.inputNode.test(":focus")&&t.inputNode.ac.fire("query",{inputValue:t.inputNode.get("value"),query:t.inputNode.get("value")})})},computeResultItems:function(t){var n=this,r={},i=[],s,o,u,a,f;for(s=0,o=t.length;s<o;s++)u=t[s],a=this.contextWeights[u.id],["tags","people","groups"].forEach(function(t){var i=u.getValue(t),s=a[t],o,f,l;if(!s)return;for(o=0,f=i.length;o<f;o++)l=i[o],r[l.key]||(r[l.key]=e.merge(l),r[l.key].score=0),r[l.key].score+=l.score*s,r[l.key].section=n.sectionMap[l.type]});for(f in r)i.push(r[f]);return this.resultItems=i,i},destructor:function(){this.inputNode&&this.inputNode.ac&&this.inputNode.ac.destroy(!0)}})},"@VERSION@",{requires:["flickr-promise","flickr-view","flutil","url","text-accentfold","url-helper","autosuggest-context-results-models","hermes-template-autosuggest-bar","hermes-template-autosuggest-item"],langBundles:["autosuggest"]});
YUI.add("hermes-template-notifications-menu",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){var s;return e.escapeExpression((s=(s=n.unseenNotificationCount||(t!=null?t.unseenNotificationCount:t))!=null?s:n.helperMissing,typeof s=="function"?s.call(t!=null?t:{},{name:"unseenNotificationCount",hash:{},data:i}):s))},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o=t!=null?t:{};return'<a class="gn-title c-notifications-menu"\n	tabindex="0"\n	aria-haspopup="true"\n	aria-expanded="false"\n	aria-label="'+e.escapeExpression((n.intlMessage||t&&t.intlMessage||n.helperMissing).call(o,{name:"intlMessage",hash:{intlName:"notifications.NOTIFICATIONS"},data:i}))+'">\n	<span class="c-notification-icon" aria-hidden="true">\n		<span class="c-notification-unseencount hidden">'+((s=n["if"].call(o,t!=null?t.unseenNotificationCount:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+"</span>\n	</span>\n</a>\n"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notifications-menu",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-notifications",function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,r,i){return"		<li>\n			"+e.escapeExpression(e.lambda(t,t))+"\n		</li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var s,o,u=t!=null?t:{},a=n.helperMissing,f="function",l=e.escapeExpression;return'<div class="notifications-container" style="width: '+l((o=(o=n.width||(t!=null?t.width:t))!=null?o:a,typeof o===f?o.call(u,{name:"width",hash:{},data:i}):o))+"; height: "+l((o=(o=n.height||(t!=null?t.height:t))!=null?o:a,typeof o===f?o.call(u,{name:"height",hash:{},data:i}):o))+"; overflow-x: "+l((o=(o=n.overflowX||(t!=null?t.overflowX:t))!=null?o:a,typeof o===f?o.call(u,{name:"overflowX",hash:{},data:i}):o))+"; overflow-y: "+l((o=(o=n.overflowY||(t!=null?t.overflowY:t))!=null?o:a,typeof o===f?o.call(u,{name:"overflowY",hash:{},data:i}):o))+';">\n	<header>\n		<h2>'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"notifications.NOTIFICATIONS"},data:i}))+'</h2>\n		<a href="/mail" class="mail-icon">'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"common.FLICKRMAIL"},data:i}))+' <span class="flickr-mail-count"></span></a>\n	</header>\n	<ul class="notifications-list" style="max-height: '+l((o=(o=n.listHeight||(t!=null?t.listHeight:t))!=null?o:a,typeof o===f?o.call(u,{name:"listHeight",hash:{},data:i}):o))+';">\n'+((s=n.each.call(u,t!=null?t.notifications:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))!=null?s:"")+'	</ul>\n\n	<a href="/activity" class="view-all">'+l((n.intlMessage||t&&t.intlMessage||a).call(u,{name:"intlMessage",hash:{intlName:"notifications.NOTIF_VIEW_RECENT_ACTIVITY"},data:i}))+"</a>\n</div>"},useData:!0}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/notifications",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("contact-models",function(e){"use strict";function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{pathAlias:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)||undefined},defaultFn:function(e){return e}},username:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},realname:{validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},displayname:{readOnly:!0,derivedBy:["username","realname"],getter:function(e,t){return this.getValue(t,"realname")||this.getValue(t,"username")}},iconfarm:{},iconserver:{},buddyicon:{readOnly:!0,derivedBy:["iconfarm","iconserver","nsid"],getter:function(t,n){var r=this.getValue(n,"iconfarm"),i=this.getValue(n,"iconserver"),s=this.getValue(n,"nsid");return e.URLHelper.getBuddyIconURL(s,r,i)}},nsid:{readOnly:!0,defaultFn:function(e){return e}},isMe:{readOnly:!0,defaultFn:function(e){var t=this.appContext.getViewer();return t.signedIn&&t.nsid===e}},isPro:{defaultValue:!1,setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},profileURL:{readOnly:!0,derivedBy:["pathAlias","nsid"],defaultFn:function(e){var t=this.getValue(e,"pathAlias");return t||(t=e),"/photos/"+t}},followsURL:{readOnly:!0,derivedBy:["pathAlias","nsid"],defaultFn:function(e){var t=this.getValue(e,"pathAlias");return t||(t=e),"/people/"+t+"/contacts"}}}})},"@VERSION@",{requires:["flickr-model-registry","attribute-helpers","url-helper"]});
YUI.add("notification-group-discussion-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,parseDiscussionModel:function(t,n,r,i){var s={id:t,pathAlias:n,title:r.name,replyCount:r.replies,groupID:r.group_id,groupName:r.groupName,iconUrls:e.APIHelper.response.agnosticizeFarmPathTransferProtocol(r.iconurls),coverPhotoUrls:e.APIHelper.response.agnosticizeFarmPathTransferProtocol(r.coverphoto_url),group:i};return s},attributes:{id:{},pathAlias:{},title:{},replyCount:{},groupID:{},groupName:{},iconUrls:{},coverPhotoUrls:{},url:{readOnly:!0,derivedBy:["id","groupID"],defaultFn:function(e){return"/groups/"+this.getValue(e,"groupID")+"/discuss/"+e}},groupUrl:{readOnly:!0,derivedBy:["id","groupID"],defaultFn:function(e){return"/groups/"+this.getValue(e,"groupID")}},group:{isModel:!0}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-gallery-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,parseGalleryModel:function(t){var n={id:t.id,pathAlias:t.pathalias,title:t.title._content,iconUrls:e.APIHelper.response.agnosticizeFarmPathTransferProtocol(t.iconurls),owner:{id:t.owner,username:t.ownername,displayname:t.realname}};return n},attributes:{id:{},title:{},pathAlias:{},url:{readOnly:!0,derivedBy:["id","owner","pathAlias"],defaultFn:function(e){var t=this.getValue(e,"pathAlias")||this.getValue(e,"owner").id;return"/photos/"+t+"/galleries/"+e}},iconUrls:{},owner:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-fave-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{id:{},type:{},owner:{isModel:!0},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-comment-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{id:{},type:{},owner:{isModel:!0},timestamp:{},content:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-follower-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{type:{},owner:{isModel:!0},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-added-to-gallery-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{type:{},owner:{isModel:!0},gallery:{},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-people-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{type:{},owner:{isModel:!0},personTagged:{isModel:!0},tagger:{isModel:!0},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-tag-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{type:{},owner:{isModel:!0},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-photo-comment-mention-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{type:{},owner:{isModel:!0},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-photo-group-invite-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{type:{},owner:{isModel:!0},group:{id:"",name:""},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-group-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{type:{},owner:{isModel:!0},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
YUI.add("notification-event-note-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,attributes:{type:{},owner:{isModel:!0},timestamp:{}}})},"@VERSION@",{requires:["flickr-model-registry"]});
